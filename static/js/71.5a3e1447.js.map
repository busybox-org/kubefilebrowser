{"version":3,"file":"js/71.5a3e1447.js","mappings":"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","sources":["webpack://KubernetesFileBrowser/./src/view/bulk_upload_container.vue?9b79","webpack://KubernetesFileBrowser/src/view/bulk_upload_container.vue","webpack://KubernetesFileBrowser/./src/view/bulk_upload_container.vue?eb12","webpack://KubernetesFileBrowser/./src/view/bulk_upload_container.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('div',[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"filterable\":\"\",\"placeholder\":_vm.$t('please_select_namespace')},on:{\"change\":_vm.selectedNamespace},nativeOn:{\"click\":function($event){return _vm.getNamespace.apply(null, arguments)}},model:{value:(_vm.namespace),callback:function ($$v) {_vm.namespace=$$v},expression:\"namespace\"}},_vm._l((_vm.namespaces),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('div',{staticStyle:{\"margin-top\":\"15px\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":_vm.$t('please_select_pod'),\"filterable\":\"\"},on:{\"change\":_vm.selectedPod},model:{value:(_vm.pod),callback:function ($$v) {_vm.pod=$$v},expression:\"pod\"}},_vm._l((_vm.pods),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('div',{staticStyle:{\"margin-top\":\"15px\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":_vm.$t('please_select_container'),\"multiple\":\"\",\"filterable\":\"\"},model:{value:(_vm.container),callback:function ($$v) {_vm.container=$$v},expression:\"container\"}},[_c('el-option',{attrs:{\"label\":_vm.$t('check_all'),\"value\":\"all\"}}),_vm._l((_vm.containers),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})})],2)],1),_c('div',{staticStyle:{\"margin-top\":\"15px\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\",\"height\":\"40px\"},attrs:{\"autocomplete\":\"off\",\"placeholder\":_vm.$t('please_input_dest_path')},model:{value:(_vm.destPath),callback:function ($$v) {_vm.destPath=$$v},expression:\"destPath\"}})],1),_c('div',{staticStyle:{\"margin-top\":\"15px\"}},[_c('el-dropdown',{staticClass:\"avatar-container\",staticStyle:{\"height\":\"36px\",\"float\":\"right\",\"margin-bottom\":\"10px\"},attrs:{\"type\":\"success\",\"trigger\":\"click\"}},[_c('div',{staticClass:\"avatar-wrapper\"},[_c('el-button',{staticClass:\"el-icon-upload\",staticStyle:{\"width\":\"90px\",\"height\":\"30px\",\"margin-right\":\"6px\",\"padding-top\":\"7px\",\"padding-left\":\"14px\"},attrs:{\"type\":\"success\",\"round\":\"\",\"size\":\"medium\"}},[_vm._v(\" \"+_vm._s(_vm.$t('upload'))+\" \"),_c('i',{staticClass:\"el-icon-caret-bottom\"})])],1),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',[_c('span',{staticClass:\"fake-file-btn\"},[_vm._v(\" \"+_vm._s(_vm.$t('upload_file'))+\" \"),_c('input',{staticStyle:{\"display\":\"block\"},attrs:{\"type\":\"file\",\"name\":\"files\",\"multiple\":\"true\"},on:{\"change\":function($event){return _vm.uploadFileOrDir($event)}}})])]),_c('el-dropdown-item',{attrs:{\"divided\":\"\"}},[_c('span',{staticClass:\"fake-file-btn\"},[_vm._v(\" \"+_vm._s(_vm.$t('upload_dir'))+\" \"),_c('input',{staticStyle:{\"display\":\"block\"},attrs:{\"type\":\"file\",\"name\":\"files\",\"webkitdirectory\":\"\",\"mozdirectory\":\"\",\"accept\":\"*/*\"},on:{\"change\":function($event){return _vm.uploadFileOrDir($event)}}})])])],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-card shadow=\"never\">\n      <div>\n        <el-select style=\"width: 100%\" v-model=\"namespace\" @click.native=\"getNamespace\" @change=\"selectedNamespace\" filterable :placeholder=\"$t('please_select_namespace')\">\n          <el-option\n              v-for=\"item in namespaces\"\n              :label=\"item\"\n              :value=\"item\"\n              :key=\"item\"\n          ></el-option>\n        </el-select>\n      </div>\n      <div style=\"margin-top: 15px\">\n      <el-select style=\"width: 100%\" :placeholder=\"$t('please_select_pod')\" v-model=\"pod\" filterable @change=\"selectedPod\">\n        <el-option v-for=\"item in pods\" :label=\"item.label\" :value=\"item.value\" :key=\"item.value\"></el-option>\n      </el-select>\n      </div>\n      <div style=\"margin-top: 15px\">\n      <el-select style=\"width: 100%\" :placeholder=\"$t('please_select_container')\" multiple filterable v-model=\"container\">\n        <el-option :label=\"$t('check_all')\" value=\"all\"></el-option>\n        <el-option v-for=\"item in containers\" :label=\"item.label\" :value=\"item.value\" :key=\"item.value\"></el-option>\n      </el-select>\n      </div>\n      <div style=\"margin-top: 15px\">\n      <el-input v-model=\"destPath\" style=\"width: 100%;height: 40px\" autocomplete=\"off\" :placeholder=\"$t('please_input_dest_path')\"></el-input>\n      </div>\n      <div style=\"margin-top: 15px\">\n        <el-dropdown  type=\"success\" class=\"avatar-container\" trigger=\"click\" style=\"height: 36px;float: right;margin-bottom: 10px;\">\n          <div class=\"avatar-wrapper\">\n            <el-button style=\"width: 90px; height: 30px; margin-right: 6px; padding-top: 7px; padding-left: 14px;\" type=\"success\" round class=\"el-icon-upload\" size=\"medium\">\n              {{ $t('upload') }}\n              <i class=\"el-icon-caret-bottom\" />\n            </el-button>\n          </div>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item>\n                <span class=\"fake-file-btn\">\n                  {{ $t('upload_file') }}\n                  <input type=\"file\" style=\"display:block;\" v-on:change=\"uploadFileOrDir($event)\" name=\"files\" multiple=\"true\">\n                </span>\n            </el-dropdown-item>\n            <el-dropdown-item divided>\n                <span class=\"fake-file-btn\">\n                  {{ $t('upload_dir') }}\n                  <input type=\"file\" style=\"display:block;\" v-on:change=\"uploadFileOrDir($event)\" name=\"files\" webkitdirectory mozdirectory accept=\"*/*\">\n                </span>\n            </el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<style>\n.fake-file-btn {\n}\n.fake-file-btn:active {\n  box-shadow: 0 1px 5px 1px rgba(0, 255, 255, 0.3) inset;\n}\n.fake-file-btn input[type=file] {\n  position: absolute;\n  font-size: 100px;\n  right: 0;\n  top: 0;\n  opacity: 0;\n  filter: alpha(opacity=0);\n  cursor: pointer\n}\n</style>\n\n<script>\nimport {\n  GetNamespace,\n  GetPods,\n  Upload,\n  MultiUpload,\n  Download,\n  CTerminal,\n  Exec,\n} from '../api/kubeapiproxy'\nimport {\n  FileBrowserCreateDir,\n  FileBrowserCreateFile,\n  FileBrowserList,\n  FileBrowserOpen,\n  FileBrowserRemove,\n  FileBrowserRename,\n} from \"../api/filebrowser\";\n\nexport default {\n  data() {\n    return {\n      namespace: \"\",\n      pod: \"\",\n      container: [],\n      namespaces:[],\n      pods: [],\n      podRes: {},\n      containers:[],\n      destPath:\"\",\n      fileList:[],\n    }\n  },\n  methods: {\n    getNamespace() {\n      GetNamespace().then(res => {\n        if (res) {\n          this.namespaces = []\n          this.pod = \"\"\n          this.pods = []\n          this.container = []\n          this.containers = []\n          const data = res.items;\n          for (const key in data) {\n            this.namespaces.push(data[key].metadata.name)\n          }\n        }\n      })\n    },\n    selectedNamespace() {\n      GetPods({namespace: this.namespace}).then(res => {\n        if (res) {\n          const pods = [];\n          this.pod = \"\"\n          this.pods = []\n          this.container = []\n          this.containers = []\n          this.podRes = res\n          const data = res.items;\n          for (const key in data) {\n            if (data[key].status.phase !== \"Running\") {\n              console.log(data[key].metadata.name, data[key].status.phase)\n              continue\n            }\n            const _d = {label: data[key].metadata.name, value: data[key].metadata.name}\n            pods.push(_d)\n          }\n          this.pods = pods\n        }\n      })\n    },\n    selectedPod() {\n      const containers = []\n      this.container = []\n      this.containers = []\n      const data = this.podRes.items\n      for (const i in data) {\n        if (data[i].metadata.name === this.pod) {\n          const _containers = data[i].spec.containers\n          for (const j in _containers) {\n            const _d = {label: _containers[j].name, value: _containers[j].name}\n            containers.push(_d)\n          }\n          this.containers = containers\n          return\n        }\n      }\n    },\n    uploadFileOrDir(e) {\n      const files = e.target.files;\n      if (files.length === 0 ) {\n        e.target.value = \"\"\n        return\n      }\n      let container = this.container\n      if (container[0] === \"all\") {\n        container = this.containers\n      }\n      const formData = new FormData();\n      //追加文件数据\n      for (let i = 0; i < files.length; i++) {\n        formData.append(\"files\", files[i]);\n      }\n      Upload(formData, {\n        namespace:this.namespace,\n        pod:this.pod,\n        containers:container,\n        dest_path:this.destPath},{\"Content-Type\":\"multipart/form-data\"}).then((res) => {\n        this.$prompt(res, this.$t('tips'), {\n          confirmButtonText: this.$t('enter'),\n          cancelButtonText: this.$t('cancel'),\n          showInput: false,\n          type: 'success'\n        })\n      }, (err) => {\n        this.$message.error(err.message)\n      })\n      e.target.value = \"\"\n    },\n  },\n  watch:{\n    container:function(val,oldVal){\n      let index =  val.indexOf('all'),oldIndex =  oldVal.indexOf('all');\n      if(index!==-1 && oldIndex===-1 && val.length>1)\n        this.container=['all'];\n      else if(index!==-1 && oldIndex!==-1 && val.length>1)\n        this.container.splice(val.indexOf('all'),1)\n    }\n  },\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./bulk_upload_container.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-40[0].rules[0].use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./bulk_upload_container.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bulk_upload_container.vue?vue&type=template&id=5a6b8cfa&\"\nimport script from \"./bulk_upload_container.vue?vue&type=script&lang=js&\"\nexport * from \"./bulk_upload_container.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bulk_upload_container.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","$t","on","selectedNamespace","nativeOn","$event","getNamespace","apply","arguments","model","value","callback","$$v","namespace","expression","_l","item","key","selectedPod","pod","label","container","destPath","staticClass","_v","_s","slot","uploadFileOrDir","staticRenderFns","data","namespaces","pods","podRes","containers","fileList","methods","GetNamespace","GetPods","console","e","formData","Upload","dest_path","then","res","confirmButtonText","cancelButtonText","showInput","type","err","watch","component"],"sourceRoot":""}