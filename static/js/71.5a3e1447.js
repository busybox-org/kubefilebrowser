"use strict";(self["webpackChunkKubernetesFileBrowser"]=self["webpackChunkKubernetesFileBrowser"]||[]).push([[71],{71:(t,e,a)=>{a.r(e),a.d(e,{default:()=>p});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{attrs:{shadow:"never"}},[a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:t.$t("please_select_namespace")},on:{change:t.selectedNamespace},nativeOn:{click:function(e){return t.getNamespace.apply(null,arguments)}},model:{value:t.namespace,callback:function(e){t.namespace=e},expression:"namespace"}},t._l(t.namespaces,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("please_select_pod"),filterable:""},on:{change:t.selectedPod},model:{value:t.pod,callback:function(e){t.pod=e},expression:"pod"}},t._l(t.pods,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("please_select_container"),multiple:"",filterable:""},model:{value:t.container,callback:function(e){t.container=e},expression:"container"}},[a("el-option",{attrs:{label:t.$t("check_all"),value:"all"}}),t._l(t.containers,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],2)],1),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-input",{staticStyle:{width:"100%",height:"40px"},attrs:{autocomplete:"off",placeholder:t.$t("please_input_dest_path")},model:{value:t.destPath,callback:function(e){t.destPath=e},expression:"destPath"}})],1),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-dropdown",{staticClass:"avatar-container",staticStyle:{height:"36px",float:"right","margin-bottom":"10px"},attrs:{type:"success",trigger:"click"}},[a("div",{staticClass:"avatar-wrapper"},[a("el-button",{staticClass:"el-icon-upload",staticStyle:{width:"90px",height:"30px","margin-right":"6px","padding-top":"7px","padding-left":"14px"},attrs:{type:"success",round:"",size:"medium"}},[t._v(" "+t._s(t.$t("upload"))+" "),a("i",{staticClass:"el-icon-caret-bottom"})])],1),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("span",{staticClass:"fake-file-btn"},[t._v(" "+t._s(t.$t("upload_file"))+" "),a("input",{staticStyle:{display:"block"},attrs:{type:"file",name:"files",multiple:"true"},on:{change:function(e){return t.uploadFileOrDir(e)}}})])]),a("el-dropdown-item",{attrs:{divided:""}},[a("span",{staticClass:"fake-file-btn"},[t._v(" "+t._s(t.$t("upload_dir"))+" "),a("input",{staticStyle:{display:"block"},attrs:{type:"file",name:"files",webkitdirectory:"",mozdirectory:"",accept:"*/*"},on:{change:function(e){return t.uploadFileOrDir(e)}}})])])],1)],1)],1)])],1)},n=[],i=a(771);a(8313);const l={data(){return{namespace:"",pod:"",container:[],namespaces:[],pods:[],podRes:{},containers:[],destPath:"",fileList:[]}},methods:{getNamespace(){(0,i.Lf)().then((t=>{if(t){this.namespaces=[],this.pod="",this.pods=[],this.container=[],this.containers=[];const e=t.items;for(const t in e)this.namespaces.push(e[t].metadata.name)}}))},selectedNamespace(){(0,i.v$)({namespace:this.namespace}).then((t=>{if(t){const e=[];this.pod="",this.pods=[],this.container=[],this.containers=[],this.podRes=t;const a=t.items;for(const t in a){if("Running"!==a[t].status.phase){console.log(a[t].metadata.name,a[t].status.phase);continue}const s={label:a[t].metadata.name,value:a[t].metadata.name};e.push(s)}this.pods=e}}))},selectedPod(){const t=[];this.container=[],this.containers=[];const e=this.podRes.items;for(const a in e)if(e[a].metadata.name===this.pod){const s=e[a].spec.containers;for(const e in s){const a={label:s[e].name,value:s[e].name};t.push(a)}return void(this.containers=t)}},uploadFileOrDir(t){const e=t.target.files;if(0===e.length)return void(t.target.value="");let a=this.container;"all"===a[0]&&(a=this.containers);const s=new FormData;for(let n=0;n<e.length;n++)s.append("files",e[n]);(0,i.gq)(s,{namespace:this.namespace,pod:this.pod,containers:a,dest_path:this.destPath},{"Content-Type":"multipart/form-data"}).then((t=>{this.$prompt(t,this.$t("tips"),{confirmButtonText:this.$t("enter"),cancelButtonText:this.$t("cancel"),showInput:!1,type:"success"})}),(t=>{this.$message.error(t.message)})),t.target.value=""}},watch:{container:function(t,e){let a=t.indexOf("all"),s=e.indexOf("all");-1!==a&&-1===s&&t.length>1?this.container=["all"]:-1!==a&&-1!==s&&t.length>1&&this.container.splice(t.indexOf("all"),1)}}},o=l;var c=a(1001),r=(0,c.Z)(o,s,n,!1,null,null,null);const p=r.exports}}]);
//# sourceMappingURL=71.5a3e1447.js.map